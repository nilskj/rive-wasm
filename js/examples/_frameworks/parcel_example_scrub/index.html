<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="user-scalable=no">
        <title>Rive Hello World - Scrubbing</title>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body class="parent">
        <main>
            <section>
                <canvas id="canvas" width="500" height="500"></canvas>
                <h3>scroll to scrub!</h3>
            </section>

        </main>

        <script src="../../../dist/rive.min.js"></script>
        <script>
            // autoplays the first animation in the default artboard
            const animation = new rive.Rive({
                src: 'https://cdn.rive.app/animations/off_road_car_v7.riv',
                canvas: document.getElementById('canvas'),
            });
            animation.on('load', () => {
                animation.play(['idle']);

                //scrub to 1.5 (should start at 0 and scrub start is 1.5)
                animation.scrub(['bouncing'],0, 1.5);

                document.getElementsByTagName('body')[0].onscroll = () => {
                    const totalScroll =
                        document.documentElement.scrollHeight - window.innerHeight;
                    const scrub = 1 * (window.scrollY / totalScroll).toFixed(3);

                    //test scrubbing two different animations, but 'idle' will keep playing as usual
                    animation.scrub(['windshield_wipers'],scrub);

                    //notice the bouncing has a work-area loop, we can now set a scrub start to start scrubbing from that loop start point
                    animation.scrub(['bouncing'],scrub * 3, 1.5);
                };
            })
        </script>
    </body>
</html>